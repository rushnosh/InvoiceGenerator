<%- include('includes/header')%>
<!-- header ends here -->

<div class="container py-md-5 container--narrow">
  
  <%- include('includes/flash') %>

    <h2>Profile Settings Page</h2>
    <%
        let fullname = "",
            emailaddress = "",
            phonenumber = "",
            abn = "",
            bsb = "",
            accountno = "",
            address1 = "",
            address2 = "",
            address3 = "",
            nextinvoiceno = "",
            footerNote = ""

        if (typeof (profileData) != 'undefined') {
                 fullname = profileData.fullname,
                    emailaddress = profileData.emailaddress,
                    phonenumber = profileData.phonenumber,
                    abn = profileData.abn,
                    bsb = profileData.bsb,
                    accountno = profileData.accountno,
                    address1 = profileData.address1,
                    address2 = profileData.address2,
                    address3 = profileData.address3,
                    nextinvoiceno = profileData.nextinvoiceno,
                    footerNote = profileData.footerNote
        }     
    %>

    <div class="container">
        <form class="ml-2 d-inline" action="/profile/<%= user._id%>/settings" method="POST">
            <div class="form-group">
                <p>Personal Details</p>
                <label for="fullname" class="mb-0 mt-1">Full Name:</label>
                <input type="text" class="form-control" name="fullname" value="<%= fullname %>">
                <label for="emailaddress" class="mb-0 mt-1">Email Address:</label>
                <input type="text" class="form-control" name="emailaddress" value="<%= emailaddress %>">
                <label for="emailaddress" class="mb-0 mt-1">Phone Number:</label>
                <input type="text" class="form-control" name="phonenumber" value="<%= phonenumber %>">
            </div>
            <div class="form-group">
                <p>Bank Account Details</p>
                <label for="bsb" class="mb-0 mt-1">BSB:</label>
                <input type="text" class="form-control" name="bsb" value="<%= bsb %>">
                <label for="accountno" class="mb-0 mt-1">Account Number:</label>
                <input type="text" class="form-control" name="accountno" value="<%= accountno %>">
            </div>
            <div class="form-group">
                <p>Your Dddress Details</p>
                <label for="address1" class="mb-0 mt-1">Address 1:</label>
                <input type="text" class="form-control" name="address1" value="<%= address1 %>">
                <label for="address2" class="mb-0 mt-1">Address 2:</label>
                <input type="text" class="form-control" name="address2" value="<%= address2 %>">
                <label for="address3" class="mb-0 mt-1">Address 3:</label>
                <input type="text" class="form-control" name="address3" value="<%= address3 %>">
            </div>
            <div class="form-group">
                <p>Invoice Details</p>
                <label for="abn" class="mb-0 mt-1">ABN:</label>
                <input type="text" class="form-control" name="abn" value="<%= abn %>">
                <label for="nextinvoiceno" class="mb-0 mt-1">Next Invoice Number:</label>
                <br>
                <small>Type in "whole" numbers. eg '77' - the system will add the additional 0's to the invoice number to a 0000 based number.</small>
                <input type="text" class="form-control" name="nextinvoiceno" value="<%= nextinvoiceno %>">
            </div>
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <button type="submit" class="btn btn-primary">Save</button>
        </form>
        <a href="/" class="btn btn-secondary">Back to Home</a>
    </div>
  
  </div>

  <%- include('includes/footer')%>